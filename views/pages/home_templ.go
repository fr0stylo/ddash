// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/fr0stylo/ddash/views/base"
	"github.com/fr0stylo/ddash/views/components"
)

func HomePage(services []components.Service) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = components.HomeHeader(components.DefaultStatusOptions(), components.EnvironmentOptions(services)).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, " <main class=\"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8\" x-data=\"{\n\t\t\t\tquery: '',\n\t\t\t\tstatus: 'all',\n\t\t\t\ttotal: 0,\n\t\t\t\tvisible: 0,\n\t\t\t\tnormalize(value) { return value.trim().toLowerCase(); },\n\t\t\t\tparseQuery() {\n\t\t\t\t\tconst filters = { env: '', status: '', team: '' };\n\t\t\t\t\tconst terms = [];\n\t\t\t\t\tthis.query.split(' ').filter(Boolean).forEach((token) => {\n\t\t\t\t\t\tconst parts = token.split(':');\n\t\t\t\t\t\tif (parts.length >= 2) {\n\t\t\t\t\t\t\tconst key = this.normalize(parts[0]);\n\t\t\t\t\t\t\tconst value = this.normalize(parts.slice(1).join(':'));\n\t\t\t\t\t\t\tif (key === 'env' || key === 'environment') {\n\t\t\t\t\t\t\t\tfilters.env = value;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (key === 'status') {\n\t\t\t\t\t\t\t\tfilters.status = value;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (key === 'team') {\n\t\t\t\t\t\t\t\tfilters.team = value;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tterms.push(token);\n\t\t\t\t\t});\n\t\t\t\t\treturn { text: this.normalize(terms.join(' ')), filters };\n\t\t\t\t},\n\t\t\t\tmatches(name, environment, status, team) {\n\t\t\t\t\tconst parsed = this.parseQuery();\n\t\t\t\t\tconst environmentValue = this.normalize(environment || '');\n\t\t\t\t\tconst nameValue = this.normalize(name || '');\n\t\t\t\t\tconst teamValue = this.normalize(team || '');\n\t\t\t\t\tconst statusFilter = parsed.filters.status || this.status;\n\t\t\t\t\tconst statusMatch = statusFilter === 'all' || status === statusFilter;\n\t\t\t\t\tconst envMatch = !parsed.filters.env || environmentValue.includes(parsed.filters.env);\n\t\t\t\t\tconst teamMatch = !parsed.filters.team || teamValue.includes(parsed.filters.team);\n\t\t\t\t\tconst textMatch = !parsed.text || nameValue.includes(parsed.text) || environmentValue.includes(parsed.text) || teamValue.includes(parsed.text);\n\t\t\t\t\treturn statusMatch && envMatch && teamMatch && textMatch;\n\t\t\t\t},\n\t\t\t\tupdateCounts() {\n\t\t\t\t\tconst cards = this.$refs.cards ? Array.from(this.$refs.cards.querySelectorAll('[data-service-card]')) : [];\n\t\t\t\t\tthis.total = cards.length;\n\t\t\t\t\tthis.visible = cards.filter((card) => this.matches(card.dataset.name, card.dataset.environment, card.dataset.status, card.dataset.team)).length;\n\t\t\t\t},\n\t\t\t\tcopyCommand(endpoint) {\n\t\t\t\t\tconst target = endpoint || '';\n\t\t\t\t\tconst command = target ? `curl -sSL ${target}` : '';\n\t\t\t\t\tif (!command) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (navigator.clipboard && navigator.clipboard.writeText) {\n\t\t\t\t\t\tnavigator.clipboard.writeText(command);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst temp = document.createElement('textarea');\n\t\t\t\t\ttemp.value = command;\n\t\t\t\t\tdocument.body.appendChild(temp);\n\t\t\t\t\ttemp.select();\n\t\t\t\t\tdocument.execCommand('copy');\n\t\t\t\t\tdocument.body.removeChild(temp);\n\t\t\t\t},\n\t\t\t\tinit() {}\n\t\t\t}\" x-init=\"updateCounts()\" x-effect=\"updateCounts()\"><div class=\"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\"><div class=\"text-sm text-gray-500\">Showing <span id=\"service-count\" class=\"font-medium text-gray-700\" x-text=\"visible\">0</span> of <span id=\"service-total\" class=\"font-medium text-gray-700\" x-text=\"total\">0</span> services</div><div class=\"inline-flex overflow-hidden rounded-lg border border-gray-200 bg-gray-50 text-xs font-medium text-gray-600 shadow-sm\"><button data-view-button=\"grid\" hx-get=\"/services/grid\" hx-target=\"#service-results\" hx-swap=\"innerHTML\" hx-include=\"#service-env\" class=\"border-r border-gray-200 px-3 py-1.5 hover:bg-gray-100\">Grid</button> <button data-view-button=\"table\" hx-get=\"/services/table\" hx-target=\"#service-results\" hx-swap=\"innerHTML\" hx-include=\"#service-env\" class=\"px-3 py-1.5 hover:bg-gray-100\">Table</button></div></div><div class=\"mt-4\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ServiceGridFragment(services).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = components.HomeFooter().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</main>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = base.Doc("DDash - Home").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ServiceGridFragment(services []components.Service) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div id=\"service-results\" hx-ext=\"sse\" sse-connect=\"/services/stream?view=grid\"><input id=\"service-view\" type=\"hidden\" name=\"view\" value=\"grid\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.GroupedServiceGrid(services).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ServiceTableFragment(services []components.Service) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var4 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var4 == nil {
			templ_7745c5c3_Var4 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<div id=\"service-results\" hx-ext=\"sse\" sse-connect=\"/services/stream?view=table\"><input id=\"service-view\" type=\"hidden\" name=\"view\" value=\"table\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.GroupedServiceTable(services).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
